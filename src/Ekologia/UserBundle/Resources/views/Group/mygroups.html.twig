{% extends 'base.html.twig' %}

{% block javascripts %}
    <script src="{{ asset('bundles/ekologiauser/js/mygroups.js') }}"></script>
{% endblock %}

{% block body %}
    <table class="table table-striped table-bordered table-hover" id="group-list">
        <thead>
            <tr>
                <th>{{ 'ekologia.user.group.mygroups.name'|trans }}</th>
                <th>{{ 'ekologia.user.group.mygroups.states.title'|trans }}</th>
                <th>{{ 'ekologia.user.group.mygroups.actions.title'|trans }}</th>
            </tr>
        </thead>
        <tbody>
            {% for usergroup in usergroups %}
                <tr>
                    <td>{{ usergroup.group.name }}</td>
                    <td>
                        {% if usergroup.active %}
                            {{ 'ekologia.user.group.mygroups.states.accepted'|trans }}
                        {% else %}
                            {% if usergroup.requestFromGroup %}
                                {{ 'ekologia.user.group.mygroups.states.waiting-user'|trans }}
                            {% else %}
                                {{ 'ekologia.user.group.mygroups.states.waiting-group'|trans }}
                            {% endif %}
                        {% endif %}
                    </td>
                    <td>
                        {% if usergroup.active == false and usergroup.requestFromGroup %}
                            <i class="glyphicon glyphicon-plus accept-group" data-groupid="{{ group.id }}"></i>
                        {% endif %}
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="3">{{ 'ekologia.user.group.mygroups.no-group'|trans }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="hidden" id="form-request">
        {{ form(formRequest) }}
    </div>
{% endblock %}
{% extends 'base.html.twig' %}

{% block javascripts %}
    <script src="{{ asset('bundles/ekologiauser/js/group-users.js') }}"></script>
{% endblock %}

{% block body %}
    <table class="table table-striped table-bordered table-hover" id="user-list">
        <thead>
            <tr>
                <th>{{ 'ekologia.user.group.users.username'|trans }}</th>
                <th>{{ 'ekologia.user.group.users.states.title'|trans }}</th>
                {% if group.isUserInclude(app.user, true) %}
                    <th>{{ 'ekologia.user.group.users.actions.title'|trans }}</th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
            {% for usergroup in group.userGroupsSort('notactive-username') %}
                <tr>
                    <td>{{ usergroup.user.username }}</td>
                    <td>
                        {% if usergroup.active %}
                            {{ 'ekologia.user.group.users.states.accepted'|trans }}
                        {% else %}
                            {% if usergroup.requestFromGroup %}
                                {{ 'ekologia.user.group.users.states.waiting-user'|trans }}
                            {% else %}
                                {{ 'ekologia.user.group.users.states.waiting-group'|trans }}
                            {% endif %}
                        {% endif %}
                    </td>
                    {% if group.isUserInclude(app.user, true) %}
                        <td>
                            {% if isUserAdmin and usergroup.active == false and usergroup.requestFromGroup == false %}
                                <i class="glyphicon glyphicon-plus accept-user" data-groupid="{{ group.id }}" data-userid="{{ usergroup.user.id }}"></i>
                            {% endif %}
                        </td>
                    {% endif %}
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="hidden" id="form-request">
        {{ form(formRequest) }}
    </div>
{% endblock %}